# 第 2 章：现代工坊：VS Code + Jupyter 的数据炼金术

在上一章我们认识了工具，现在我们要把它们组装起来。

虽然 Jupyter 原生界面是网页版的，但在实际工作中，我们更推荐使用 **VS Code** 来运行 Jupyter Notebook。它就像是给你的实验台装上了“机械臂”和“透视镜”，效率翻倍。

## 2.1 核心概念：三位一体

在使用 VS Code 写 AI 代码前，你必须理解这三个角色的关系，否则你会经常遇到“找不到模块”的报错。

1. **VS Code:** 你的**操控台**（界面、编辑器）。
2. **Jupyter:** 你的**实验记录本**（文件格式 `.ipynb`）。
3. **Anaconda (Conda):** 你的**发动机**（Python 环境）。

**⚠️ 新手第一坑：选择内核 (Select Kernel)**
VS Code 只是一个壳，它需要你告诉它：“用哪个发动机来跑代码？”。

* **操作:** 在 VS Code 打开 `.ipynb` 文件后，**右上角**会有一个 `Select Kernel` (或者显示 `Python 3.x.x`) 的按钮。
* **关键点:** 点击它，必须选择你通过 **Anaconda** 创建的那个环境（例如 `base` 或你自定义的 `ai_env`）。只有选对了内核，你 `import pandas` 才不会报错。

---

## 2.2 VS Code 里的“超能力”

相比于网页版 Jupyter，VS Code 提供了几个极其强大的独家功能，请务必在接下来的练习中尝试：

### 🔍 1. 变量查看器 (Data Viewer) —— 也就是“上帝视角”

在网页版里，你想看数据长什么样，得用 `print(df)`。
但在 VS Code 里：

1. 运行产生变量的代码。
2. 点击顶部工具栏的 **"Variables"** 按钮。
3. 你会看到一个列表。点击 DataFrame 旁边的图标，VS Code 会弹出一个**像 Excel 一样的交互式表格**。你可以直接在里面筛选、排序，查看每一行数据，而不需要写一行代码！

### 🧠 2. 智能补全 (IntelliSense)

当你输入 `pd.re` 时，VS Code 会自动弹窗提示 `read_csv`, `read_excel` 等，并显示参数文档。这比在网页里狂按 `Tab` 键要流畅得多。

---

## 2.3 实战任务：波士顿房价分析 (VS Code 版)

> **🎯 任务目标:**
> 在 VS Code 中创建一个新的 Notebook，分析房屋面积、房间数与价格的关系，并生成训练数据。

请在 VS Code 中新建一个文件 `house_price.ipynb`，按照以下步骤操作。

### 第一步：Pandas —— 数据的“Excel 杀手”

```python
# Cell 1
import pandas as pd

# 伪造一份数据
data = {
    '房间数': [1, 2, 3, 4, 5, 2, 6, 8],
    '面积': [30, 50, 80, 100, 120, 55, 150, 200],
    '价格': [100, 160, 250, 320, 380, 170, 480, 650]
}

df = pd.DataFrame(data)

# 运行这一格 (Shift + Enter)
# 👉 交互动作：现在，请点击 VS Code 顶部的 'Variables' 按钮，
# 在弹出的列表中找到 'df'，点击它左侧的小图标。
# 你看到了什么？是不是一个漂亮的表格？

```

### 第二步：Matplotlib —— 嵌入式画图

在 VS Code 中，图表会直接渲染在代码单元格下方，并且支持缩放和保存。

```python
# Cell 2
import matplotlib.pyplot as plt

# 设置中文字体（避免乱码的常规操作，视系统而定，这里先用英文演示）
plt.figure(figsize=(8, 5))

# 绘制：横轴是面积，纵轴是价格
plt.scatter(x=df['面积'], y=df['价格'], color='#FF5733') # 支持 Hex 颜色代码

plt.title("House Price Analysis")
plt.xlabel("Area (sqm)")
plt.ylabel("Price (10k)")
plt.grid(True, linestyle='--')

plt.show()

```

### 第三步：NumPy —— 矩阵化 (关键)

机器学习模型不吃 Excel 表格，只吃矩阵。这一步是将“人类读得懂的数据”转化为“机器读得懂的数据”。

```python
# Cell 3
import numpy as np

# .values 是 Pandas 到 NumPy 的桥梁
# X (特征): 我们用 '房间数' 和 '面积' 来预测
X = df[['房间数', '面积']].values 

# y (标签): 我们要预测的目标是 '价格'
y = df['价格'].values

print(f"X Shape: {X.shape}") # 应该是 (8, 2)
print(f"y Shape: {y.shape}") # 应该是 (8,)

# 👉 交互动作：再次查看 Variables 视图
# 观察 X 和 df 的区别。df 是带有表头的，而 X 只是纯粹的数字矩阵。

```

---

## 2.4 必须掌握的 VS Code 快捷键

在 VS Code 中写 Notebook，效率来源于键盘：

1. **运行当前格:** `Shift + Enter` (最常用)
2. **仅运行当前格不跳转:** `Ctrl + Alt + Enter` (调试时很有用)
3. **在上方插入格:** `A` (需在命令模式，即光标不在代码框内时)
4. **在下方插入格:** `B`
5. **命令面板:** `F1` 或 `Ctrl/Cmd + Shift + P`。如果在 Jupyter 里迷路了，或者内核连不上，按这个搜 "Reload Window" 通常能解决 90% 的问题。

---

## 2.5 总结：数据流水线

恭喜！你已经掌握了现代 AI 工程师的标准工作流：

1. **环境:** 用 **Anaconda** 管理包。
2. **工具:** 用 **VS Code** 编写和调试代码。
3. **数据:** 用 **Pandas** 读取，用 **Variables View** 检查。
4. **转化:** 用 **NumPy** 将数据转化为矩阵，准备喂给模型。
